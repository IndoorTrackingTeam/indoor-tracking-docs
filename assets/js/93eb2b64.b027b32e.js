"use strict";(self.webpackChunkdocs_it=self.webpackChunkdocs_it||[]).push([[512],{9160:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>t,contentTitle:()=>d,default:()=>h,frontMatter:()=>o,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"backend/api_principal","title":"API Principal","description":"Foi utilizado a IDE VSCode (OBS: Pode usar qualquer IDE).","source":"@site/docs/backend/api_principal.md","sourceDirName":"backend","slug":"/backend/api_principal","permalink":"/indoor-tracking-docs/docs/backend/api_principal","draft":false,"unlisted":false,"editUrl":"https://github.com/IndoorTrackingTeam/indoor-tracking-docs/edit/main/docs/backend/api_principal.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1,"toc_mim_heading_level":1,"toc_max_heading_level":4},"sidebar":"tutorialSidebar","previous":{"title":"Backend","permalink":"/indoor-tracking-docs/docs/"},"next":{"title":"API Machine Learning","permalink":"/indoor-tracking-docs/docs/backend/api_ml"}}');var i=n(4848),a=n(8453);const o={sidebar_position:1,toc_mim_heading_level:1,toc_max_heading_level:4},d="API Principal",t={},c=[{value:"Instru\xe7\xf5es para Executar a API",id:"instru\xe7\xf5es-para-executar-a-api",level:2},{value:"Executando com Python",id:"executando-com-python",level:3},{value:"Executando com Docker Compose",id:"executando-com-docker-compose",level:3},{value:"Testando a API",id:"testando-a-api",level:3},{value:"Rotas",id:"rotas",level:2},{value:"Principais Endpoints:",id:"principais-endpoints",level:3},{value:"/user",id:"user",level:4},{value:"/equipment",id:"equipment",level:4},{value:"/router/training-data",id:"routertraining-data",level:4},{value:"/router/data",id:"routerdata",level:4},{value:"/settings",id:"settings",level:4},{value:"Testes",id:"testes",level:2},{value:"Ferramentas utilizadas",id:"ferramentas-utilizadas",level:3},{value:"Estrutura dos testes",id:"estrutura-dos-testes",level:3},{value:"1. Testes Unit\xe1rios:",id:"1-testes-unit\xe1rios",level:4},{value:"2. Testes de Integra\xe7\xe3o:",id:"2-testes-de-integra\xe7\xe3o",level:4},{value:"3.\tConfigura\xe7\xe3o e Mock de Banco de Dados:",id:"3configura\xe7\xe3o-e-mock-de-banco-de-dados",level:4},{value:"Cobertura de Testes",id:"cobertura-de-testes",level:3},{value:"Execu\xe7\xe3o dos Testes",id:"execu\xe7\xe3o-dos-testes",level:3}];function l(e){const s={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.header,{children:(0,i.jsx)(s.h1,{id:"api-principal",children:"API Principal"})}),"\n",(0,i.jsx)(s.admonition,{type:"info",children:(0,i.jsx)(s.p,{children:"Foi utilizado a IDE VSCode (OBS: Pode usar qualquer IDE)."})}),"\n",(0,i.jsx)(s.h2,{id:"instru\xe7\xf5es-para-executar-a-api",children:"Instru\xe7\xf5es para Executar a API"}),"\n",(0,i.jsxs)(s.p,{children:["Esta se\xe7\xe3o fornece as instru\xe7\xf5es para iniciar a API desenvolvida com ",(0,i.jsx)(s.strong,{children:"FastAPI"}),". Voc\xea pode executar a aplica\xe7\xe3o diretamente com ",(0,i.jsx)(s.strong,{children:"Python"})," ou utilizando ",(0,i.jsx)(s.strong,{children:"Docker Compose"}),"."]}),"\n",(0,i.jsx)(s.p,{children:"Primeiramente, clone o repositorio:"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{children:"git clone https://github.com/IndoorTrackingTeam/indoor-tracking-backend.git\n"})}),"\n",(0,i.jsx)(s.h3,{id:"executando-com-python",children:"Executando com Python"}),"\n",(0,i.jsxs)(s.p,{children:["Para executar a API localmente utilizando ",(0,i.jsx)(s.strong,{children:"Python"}),", siga os passos abaixo:"]}),"\n",(0,i.jsxs)(s.ol,{children:["\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Instale as depend\xeancias:"})}),"\n",(0,i.jsxs)(s.p,{children:["Dentro do diret\xf3rio ",(0,i.jsx)(s.code,{children:"api"}),", instale as depend\xeancias listadas no arquivo ",(0,i.jsx)(s.code,{children:"requirements.txt"}),":"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{children:"pip install -r requirements.txt\n"})}),"\n"]}),"\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Inicie a aplica\xe7\xe3o:"})}),"\n",(0,i.jsx)(s.p,{children:"Execute o comando abaixo para iniciar o servidor FastAPI:"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-python",children:"python main.py\n"})}),"\n",(0,i.jsxs)(s.p,{children:["Por padr\xe3o, a API estar\xe1 dispon\xedvel em: ",(0,i.jsx)(s.a,{href:"http://localhost:8000",children:"http://localhost:8000"}),"."]}),"\n",(0,i.jsx)(s.p,{children:"Se desejar customizar a execu\xe7\xe3o, voc\xea pode rodar o servidor utilizando uvicorn diretamente:"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-python",children:"uvicorn main:api --host 0.0.0.0 --port 8000 --reload\n"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(s.h3,{id:"executando-com-docker-compose",children:"Executando com Docker Compose"}),"\n",(0,i.jsxs)(s.p,{children:["Caso prefira utilizar ",(0,i.jsx)(s.strong,{children:"Docker Compose"})," para gerenciar a execu\xe7\xe3o da API e suas depend\xeancias, siga os seguintes passos:"]}),"\n",(0,i.jsxs)(s.ol,{children:["\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Certifique-se de ter o Docker e Docker Compose instalados:"})}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.a,{href:"https://docs.docker.com/get-docker/",children:"Instru\xe7\xf5es para instalar o Docker"})}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.a,{href:"https://docs.docker.com/compose/install/",children:"Instru\xe7\xf5es para instalar o Docker Compose"})}),"\n"]}),"\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Construa e execute os cont\xeaineres:"})}),"\n",(0,i.jsxs)(s.p,{children:["Navegue at\xe9 o diret\xf3rio ",(0,i.jsx)(s.code,{children:"api"})," (onde est\xe1 localizado o arquivo ",(0,i.jsx)(s.code,{children:"docker-compose.yml"}),") e execute:"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{children:"docker-compose up --build\n"})}),"\n",(0,i.jsx)(s.p,{children:"O comando acima ir\xe1 construir a imagem Docker e iniciar os cont\xeaineres."}),"\n"]}),"\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Acesse a API"}),":"]}),"\n",(0,i.jsxs)(s.p,{children:["Ap\xf3s a execu\xe7\xe3o, a API estar\xe1 dispon\xedvel em: ",(0,i.jsx)(s.a,{href:"http://localhost:8000",children:"http://localhost:8000"}),"."]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(s.h3,{id:"testando-a-api",children:"Testando a API"}),"\n",(0,i.jsxs)(s.p,{children:["Ap\xf3s a execu\xe7\xe3o, voc\xea pode acessar a documenta\xe7\xe3o interativa da API fornecida pelo ",(0,i.jsx)(s.strong,{children:"Swagger"})," diretamente pelo navegador no seguinte endere\xe7o:\r\n",(0,i.jsx)(s.a,{href:"http://localhost:8000/docs",children:"http://localhost:8000/docs"})]}),"\n",(0,i.jsx)(s.p,{children:"Essa interface permite que voc\xea visualize e teste todos os endpoints expostos pela API."}),"\n",(0,i.jsx)(s.h2,{id:"rotas",children:"Rotas"}),"\n",(0,i.jsx)(s.p,{children:"A API Principal foi desenvolvida para fornecer uma interface de comunica\xe7\xe3o eficiente entre o frontend e o backend, permitindo o gerenciamento de dados relacionados aos usu\xe1rios, equipamentos e roteadores envolvidos no sistema de rastreamento indoor. Esta API tamb\xe9m lida com o processamento de dados para o treinamento de modelos de Machine Learning, al\xe9m de realizar a infer\xeancia de localiza\xe7\xf5es dos dispositivos monitorados."}),"\n",(0,i.jsxs)(s.p,{children:["Desenvolvida com ",(0,i.jsx)(s.strong,{children:"FastAPI"}),", uma das principais prioridades dessa API \xe9 a alta performance e simplicidade, facilitando a integra\xe7\xe3o com o frontend e outros servi\xe7os. Toda a estrutura est\xe1 otimizada para ser hospedada no ",(0,i.jsx)(s.strong,{children:"Google Cloud Platform (GCP)"}),", utilizando o ",(0,i.jsx)(s.strong,{children:"MongoDB Atlas"})," como nosso banco de dados."]}),"\n",(0,i.jsx)(s.p,{children:"A seguir, est\xe3o listados os principais endpoints da API, divididos por suas responsabilidades."}),"\n",(0,i.jsx)(s.h3,{id:"principais-endpoints",children:"Principais Endpoints:"}),"\n",(0,i.jsx)(s.h4,{id:"user",children:"/user"}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Descri\xe7\xe3o"}),": Gerencia as opera\xe7\xf5es relacionadas aos usu\xe1rios do sistema."]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Rotas:"})}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)("span",{class:"highlight-blue",children:"GET"})," ",(0,i.jsx)(s.code,{children:"/user/read-all"}),": Retorna a lista de todos os usu\xe1rios cadastrados."]}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)("span",{class:"highlight-blue",children:"GET"})," ",(0,i.jsx)(s.code,{children:"/user/get-user?id={id}"}),": Retorna os detalhes de um usu\xe1rio espec\xedfico identificado por seu ID."]}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)("span",{class:"highlight-blue",children:"GET"})," ",(0,i.jsx)(s.code,{children:"/user/send-email/redefine-password?email={email}"}),": Envia um email para realizar a redefini\xe7\xe3o de senha do usu\xe1rio (esse endpoint \xe9 ass\xedncrono)."]}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)("span",{class:"highlight-green",children:"POST"})," ",(0,i.jsx)(s.code,{children:"/user/create"}),": Cria um novo usu\xe1rio."]}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"Corpo da requisi\xe7\xe3o:"}),"\n"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-json",children:'{\r\n    "name": "string",\r\n    "email": "string",\r\n    "password": "string"\r\n}\n'})}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)("span",{class:"highlight-green",children:"POST"})," ",(0,i.jsx)(s.code,{children:"/user/login"}),": Faz a autentica\xe7\xe3o do login."]}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"Corpo da requisi\xe7\xe3o:"}),"\n"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-json",children:'{\r\n    "email": "string",\r\n    "password": "string"\r\n}\n'})}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)("span",{class:"highlight-green",children:"POST"})," ",(0,i.jsx)(s.code,{children:"/user/change-user-admin"}),": Altera o campo de administra\xe7\xe3o do usu\xe1rio (false/true)."]}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"Corpo da requisi\xe7\xe3o:"}),"\n"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-json",children:'{\r\n    "email": "string",\r\n    "isAdmin": false\r\n}\n'})}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)("span",{class:"highlight-orange",children:"PUT"})," ",(0,i.jsx)(s.code,{children:"/user/update"}),": Atualiza as informa\xe7\xf5es de um usu\xe1rio."]}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"Corpo da requisi\xe7\xe3o:"}),"\n"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-json",children:'{\r\n    "name": "string",\r\n    "email": "string",\r\n    "password": "string"\r\n}\n'})}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)("span",{class:"highlight-orange",children:"PUT"})," ",(0,i.jsx)(s.code,{children:"/user/update-photo"}),": Atualiza a foto de um usu\xe1rio."]}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"Corpo da requisi\xe7\xe3o:"}),"\n"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-json",children:'{\r\n    "_id": "string",\r\n    "photo": "string"\r\n}\n'})}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)("span",{class:"highlight-orange",children:"PUT"})," ",(0,i.jsx)(s.code,{children:"/user/redefine-password"}),": Atualiza a senha de um usu\xe1rio."]}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"Corpo da requisi\xe7\xe3o:"}),"\n"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-json",children:'{\r\n    "email": "string",\r\n    "password": "string"\r\n}\n'})}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)("span",{class:"highlight-red",children:"DELETE"})," ",(0,i.jsx)(s.code,{children:"/user/delete?user_email={user_email}"}),": Exclui um usu\xe1rio."]}),"\n",(0,i.jsx)(s.h4,{id:"equipment",children:"/equipment"}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Descri\xe7\xe3o"}),": Gerencia as opera\xe7\xf5es relacionadas aos equipamentos do sistema deste de o CRUD at\xe9 atualiza\xe7\xf5es da localiza\xe7\xe3o do equipamento."]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Rotas:"})}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)("span",{class:"highlight-blue",children:"GET"})," ",(0,i.jsx)(s.code,{children:"/equipment/read-all"}),": Retorna todos os equipamentos cadastrados."]}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)("span",{class:"highlight-blue",children:"GET"})," ",(0,i.jsx)(s.code,{children:"/equipment/read-one?register_={register_}"}),": Retorna um equipamento espec\xedfico."]}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)("span",{class:"highlight-blue",children:"GET"})," ",(0,i.jsx)(s.code,{children:"/equipment/historic"}),": Retorna o hist\xf3rico de todos os equipamento cadastrados."]}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)("span",{class:"highlight-blue",children:"GET"})," ",(0,i.jsx)(s.code,{children:"/equipment/get-equipments-by-current-room?current_room={current_room}"}),": Retorna os equipamentos encontrados em uma determinada sala."]}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)("span",{class:"highlight-green",children:"POST"})," ",(0,i.jsx)(s.code,{children:"/equipment/create"}),": Adiciona um novo equipamento ao sistema."]}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"Corpo da requisi\xe7\xe3o:"}),"\n"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-json",children:'{\r\n    "name": "string",\r\n    "register": "string",\r\n    "maintenance": false,\r\n    "c_room": "string",\r\n    "c_date": "YYYY-MM-DDTHH:MM:SS.SSSZ",\r\n    "esp_id": "string",\r\n    "image": "string"\r\n}\n'})}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)("span",{class:"highlight-green",children:"POST"})," ",(0,i.jsx)(s.code,{children:"/equipment/update-equipments-position"}),": Para cada equiamento cadastrado, ele verifica a sua localiza\xe7\xe3o atual e depois atualiza a sala atual e o hist\xf3rico do equipamento."]}),"\n",(0,i.jsx)(s.p,{children:":: !question\r\nN\xe3o lembro se ainda \xe9 utilizado esse endpoint"}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)("span",{class:"highlight-orange",children:"PUT"})," ",(0,i.jsx)(s.code,{children:"/equipment/update-maintenance"}),": Atualiza informa\xe7\xf5es de um equipamento."]}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"Corpo da requisi\xe7\xe3o:"}),"\n"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-json",children:'{\r\n    "register": "string",\r\n    "maintenance": false\r\n}\n'})}),"\n",(0,i.jsx)(s.p,{children:"::"}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)("span",{class:"highlight-orange",children:"PUT"})," ",(0,i.jsx)(s.code,{children:"/equipment/update-image"}),": Atualiza informa\xe7\xf5es de um equipamento."]}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"Corpo da requisi\xe7\xe3o:"}),"\n"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-json",children:'{\r\n    "register": "string",\r\n    "image": "string"\r\n}\n'})}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)("span",{class:"highlight-red",children:"DELETE"})," ",(0,i.jsx)(s.code,{children:"/equipment/delete?register_={register_}"}),": Remove um equipamento do sistema."]}),"\n",(0,i.jsx)(s.h4,{id:"routertraining-data",children:"/router/training-data"}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Descri\xe7\xe3o"}),": Gerencia os dados de treinamento dos modelos de Machine Learning, armazenando os dados necess\xe1rios para infer\xeancia futura."]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Rotas:"})}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)("span",{class:"highlight-blue",children:"GET"})," ",(0,i.jsx)(s.code,{children:"/router/training-data/get-data-for-training"}),": Retorna os dados de treinamento armazenados separados em dados de treino e dados de teste para realizar o treinamento do modelo."]}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)("span",{class:"highlight-blue",children:"GET"})," ",(0,i.jsx)(s.code,{children:"/router/training-data/get-all-macs-in-training"}),": Retorna todos os macs encontrados nos dados de treinamento."]}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)("span",{class:"highlight-green",children:"POST"})," ",(0,i.jsx)(s.code,{children:"/router/training-data/create"}),": Insere novos dados de treinamento para o modelo."]}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"Corpo da requisi\xe7\xe3o:"}),"\n"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-json",children:'{\r\n    "room": "string",\r\n    "networks": [\r\n        {\r\n        "mac": "string",\r\n        "name_router": "string",\r\n        "rssi": 0,\r\n        "esp_id": "string"\r\n        }\r\n    ]\r\n}\n'})}),"\n",(0,i.jsx)(s.h4,{id:"routerdata",children:"/router/data"}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Descri\xe7\xe3o"}),": Lida com o armazenamento e consulta de dados dos roteadores capturados para posteriormente encontrar sua localiza\xe7\xe3o."]}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Rotas"}),":"]}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)("span",{class:"highlight-blue",children:"GET"})," ",(0,i.jsx)(s.code,{children:"/router/data/get-last-datafrom-esp-id?esp_id={esp_id}"}),": Retorna o ultimo dados cadastrado pelo esp."]}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)("span",{class:"highlight-green",children:"POST"})," ",(0,i.jsx)(s.code,{children:"/router/data/create"}),": Insere dados capturados por um esp."]}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"Corpo da requisi\xe7\xe3o:"}),"\n"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-json",children:'{\r\n    "esp_id": "string",\r\n    "networks": [\r\n        {\r\n        "mac": "string",\r\n        "name_router": "string",\r\n        "rssi": 0\r\n        }\r\n    ]\r\n}\n'})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"Corpo da requisi\xe7\xe3o:"}),"\n"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-json",children:'{\r\n    "esp_id": "string",\r\n    "networks": [\r\n        {\r\n        "mac": "string",\r\n        "name_router": "string",\r\n        "rssi": 0\r\n        }\r\n    ]\r\n}\n'})}),"\n",(0,i.jsx)(s.h4,{id:"settings",children:"/settings"}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Descri\xe7\xe3o"}),": Gerencia as configura\xe7\xf5es do hospital, permitindo o gerenciamento dos ESPs que ser\xe3o considerados para realizar o treinamento do modelo."]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Rotas:"})}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)("span",{class:"highlight-blue",children:"GET"})," ",(0,i.jsx)(s.code,{children:"/settings/get-mac-list"}),": Retorna a lista de MACs que ser\xe3o reconhecidos para o treinamento do modelo."]}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)("span",{class:"highlight-green",children:"POST"})," ",(0,i.jsx)(s.code,{children:"/settings/create-mac-list"}),": Inseri a lista de MACs."]}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"Corpo da requisi\xe7\xe3o:"}),"\n"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-json",children:'{\r\n    "hospital_name": "string",\r\n    "macs": {\r\n        "00:00:00:00:00:00" : "string",\r\n        "00:00:00:00:00:00" : "string"\r\n    }\r\n}\n'})}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)("span",{class:"highlight-orange",children:"PUT"})," ",(0,i.jsx)(s.code,{children:"/settings/update-mac-list"}),": Atualiza a lista de MACs."]}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"Corpo da requisi\xe7\xe3o:"}),"\n"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-json",children:'{\r\n    "hospital_name": "string",\r\n    "macs": {\r\n        "00:00:00:00:00:00" : "string",\r\n        "00:00:00:00:00:00" : "string"\r\n    }\r\n}\n'})}),"\n",(0,i.jsx)(s.h2,{id:"testes",children:"Testes"}),"\n",(0,i.jsxs)(s.p,{children:["Para garantir a robustez e confiabilidade da API Principal, foram desenvolvidos testes ",(0,i.jsx)(s.strong,{children:"unit\xe1rios"})," e ",(0,i.jsx)(s.strong,{children:"de integra\xe7\xe3o"}),", utilizando o framework ",(0,i.jsx)(s.strong,{children:"pytest"}),"."]}),"\n",(0,i.jsx)(s.h3,{id:"ferramentas-utilizadas",children:"Ferramentas utilizadas"}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"pytest"}),": Framework de testes utilizado para criar e executar os testes."]}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"TestClient"})," (da FastAPI): Cliente usado para simular chamadas HTTP \xe0s rotas da API, permitindo testar a aplica\xe7\xe3o de forma simples e eficiente."]}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"MongoClient"})," (da PyMongo): Cliente utilizado para gerenciar a conex\xe3o com o MongoDB durante os testes."]}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"pytest-cov"}),": Plugin para pytest utilizado para gerar relat\xf3rios de cobertura de testes."]}),"\n",(0,i.jsx)(s.h3,{id:"estrutura-dos-testes",children:"Estrutura dos testes"}),"\n",(0,i.jsx)(s.h4,{id:"1-testes-unit\xe1rios",children:"1. Testes Unit\xe1rios:"}),"\n",(0,i.jsx)(s.p,{children:"Os testes unit\xe1rios t\xeam o foco em testar cada componente da API de maneira isolada, sem a depend\xeancia de servi\xe7os externos, como o banco de dados."}),"\n",(0,i.jsx)(s.h4,{id:"2-testes-de-integra\xe7\xe3o",children:"2. Testes de Integra\xe7\xe3o:"}),"\n",(0,i.jsxs)(s.p,{children:["Os testes de integra\xe7\xe3o t\xeam como objetivo validar o comportamento da API em cen\xe1rios que envolvem a intera\xe7\xe3o com o banco de dados MongoDB. Nesses testes, utilizamos o ",(0,i.jsx)(s.strong,{children:"MongoClient"})," para manipular e verificar os dados reais no banco e tamb\xe9m usamos o ",(0,i.jsx)(s.strong,{children:"TestClient"})," do FastAPI para simular as requisi\xe7\xf5es HTTP e validar o comportamento esperado."]}),"\n",(0,i.jsx)(s.h4,{id:"3configura\xe7\xe3o-e-mock-de-banco-de-dados",children:"3.\tConfigura\xe7\xe3o e Mock de Banco de Dados:"}),"\n",(0,i.jsxs)(s.p,{children:["Durante os testes de integra\xe7\xe3o, para evitar manipular os dados em um banco de dados real, usamos o ",(0,i.jsx)(s.strong,{children:"pytest fixtures"})," para criar um ambiente isolado. Utilizamos o MongoClient para conectar ao banco de dados durante os testes, garantindo que os dados sejam limpos ap\xf3s cada teste para manter a consist\xeancia."]}),"\n",(0,i.jsx)(s.h3,{id:"cobertura-de-testes",children:"Cobertura de Testes"}),"\n",(0,i.jsxs)(s.p,{children:["A cobertura dos testes \xe9 gerada utilizando o ",(0,i.jsx)(s.strong,{children:"pytest-cov"}),", o que nos permite monitorar o quanto do c\xf3digo est\xe1 sendo testado."]}),"\n",(0,i.jsx)(s.h3,{id:"execu\xe7\xe3o-dos-testes",children:"Execu\xe7\xe3o dos Testes"}),"\n",(0,i.jsxs)(s.p,{children:["Dentro do diret\xf3rio ",(0,i.jsx)(s.code,{children:"api"}),", podemos executar os testes com o comando:"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{children:"pytest --cov=src test/\n"})}),"\n",(0,i.jsx)(s.p,{children:"Esse comando rodar\xe1 todos os testes e gerar\xe1 um relat\xf3rio de cobertura, permitindo verificar quais partes do c\xf3digo est\xe3o sendo testadas e identificar poss\xedveis \xe1reas n\xe3o cobertas."})]})}function h(e={}){const{wrapper:s}={...(0,a.R)(),...e.components};return s?(0,i.jsx)(s,{...e,children:(0,i.jsx)(l,{...e})}):l(e)}},8453:(e,s,n)=>{n.d(s,{R:()=>o,x:()=>d});var r=n(6540);const i={},a=r.createContext(i);function o(e){const s=r.useContext(a);return r.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function d(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),r.createElement(a.Provider,{value:s},e.children)}}}]);